import os
from huggingface_hub import snapshot_download

def main():
    repo_id = "stabilityai/stable-diffusion-3.5-large"

    hf_token = os.getenv("HF_TOKEN")
    if not hf_token:
        raise RuntimeError(
            "HF_TOKEN environment variable is not set. "
            "Make sure you created a Hugging Face token and set it in your user env."
        )

    print(f"Using HF token (first 8 chars): {hf_token[:8]}********")
    print(f"Downloading repo: {repo_id}")

    local_dir = os.path.join("models", "sd35-large")
    os.makedirs(local_dir, exist_ok=True)

    print(f"Local target directory: {local_dir}")

    snapshot_download(
        repo_id=repo_id,
        local_dir=local_dir,
        local_dir_use_symlinks=False,
        token=hf_token,
        resume_download=True,
    )

    print("\nâœ… Download completed.")
    print(f"All SD3.5 Large files are in: {os.path.abspath(local_dir)}")


if __name__ == "__main__":
    main()
